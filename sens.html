<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" />
    <title>Convert pre-Shadow Legacy to Shadow Legacy ADS - Rainbow Six Siege</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-size: 16px;
        font-family: "Poppins", sans-serif;
      }

      .details {
        margin: 15px;
        display: block;
      }

      input[type="number"] {
        width: 50px;
      }

      .gamesettings {
        display: block;
        font-family: monospace;
        white-space: pre;
        margin: 1em 0px;
      }

      output[name="x1"],
      output[name="x25"] {
        font-weight: bold;
      }

      .xs {
        font-size: 0.7em;
      }

      .xss {
        font-size: 0.5em;
      }

      .text-center {
        text-align: center;
      }

      .mt-2 {
        margin-top: 0.5rem;
      }

      .mb-2 {
        margin-bottom: 0.5rem;
      }

      .m-0 {
        margin: 0;
      }

      p {
        margin: 0;
      }

      a,
      a:visited {
        color: rgb(27, 149, 224);
        text-decoration: none;
        background-color: transparent;
      }

      a:hover,
      a:focus {
        text-decoration: underline;
      }

      .warning2 {
        display: none;
      }

      li > [class$="NEW"]:not(:empty)::before,
      div:not(.gamesettings) > [class$="NEW"]:not(:empty)::before {
        content: " = ";
      }
      li > [class$="NEW"]:not(:empty)::after,
      div:not(.gamesettings) > [class$="NEW"]:not(:empty)::after {
        content: " *";
        color: red;
      }

      footer {
        border-top: 1px solid #c3c3c3;
      }

      .footer-content {
        padding-top: 1rem;
        max-width: 60vw;
        margin: auto;
        color: #696969;
      }

      form {
        max-width: 60vw;
        margin: auto;
      }

      header {
        text-align: center;
        margin-bottom: 1rem;
      }

      header h1 {
        margin: 0.5rem 0;
      }

      @media (max-width: 800px) {
        .footer-content {
          max-width: 100%;
          padding-left: 0.5rem;
          padding-right: 0.5rem;
        }

        form {
          max-width: 100%;
          padding-left: 0.5rem;
          padding-right: 0.5rem;
        }
      }

      h6 {
        font-weight: bold;
        margin: 1rem 0;
      }

      .heart {
        color: red;
      }

      table,
      td,
      th {
        border: 1px solid #c3c3c3;
        text-align: center;
      }

      td:first-of-type {
        border-top-left-radius: 4px;
      }

      td,
      th {
        padding: 4px;
      }

      table {
        border-collapse: collapse;
        margin: auto;
      }

      .alert {
        padding: 0.5rem;
        border: 1px solid #c3c3c3;
        border-radius: 6px;
        margin-bottom: 0.5rem;
      }

      .alert:empty {
        display: none;
      }

      .alert-danger {
        border-color: red;
      }

      .code {
        font-family: monospace;
      }

      /* Spin Buttons modified */

      input[type="number"]::-webkit-outer-spin-button,
      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        background: #fff
          url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAKUlEQVQYlWNgwAT/sYhhKPiPT+F/LJgEsHv37v+EMGkmkuImoh2NoQAANlcun/q4OoYAAAAASUVORK5CYII=)
          no-repeat center center;
        width: 1em;
        border-left: 1px solid #bbb;
        opacity: 0.5; /* shows Spin Buttons per default (Chrome >= 39) */
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
      }
      input[type="number"]::-webkit-inner-spin-button:hover,
      input[type="number"]::-webkit-inner-spin-button:active {
        box-shadow: 0 0 2px #0cf;
        opacity: 0.8;
      }
      input[type="number"] {
        position: relative;
        border: 1px solid #c3c3c3;
        border-radius: 6px;
        padding: 0.4rem;
      }

      select {
        border-radius: 4px;
        background: transparent;
        padding: 4px;
        border: 1px solid #c3c3c3;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Convert pre-Shadow Legacy ADS</h1>
      <p>
        Do you want to convert your pre-Shadow Legacy ADS sensitivity to the current format?<br />Enter
        your data and magically convert it!
      </p>
    </header>
    <form name="form">
      <div class="alert">
        <b>Make Your Choice</b>
        <ol class="m-0" type="a">
          <li>
            Set every sens to <b id="x1x"></b><span class="x1NEW"></span> (1.0x), so every scope
            will match the <b>old Holo/Reflex/Reddot</b> sens
            <span class="xs">(good for eye-hand memory)</span>
          </li>
          <li>
            Set every sens to <b id="x25x"></b><span class="x25NEW"></span> (2.5x), so every scope
            will match the <b>old ACOG</b> sens
            <span class="xs">(good for eye-hand memory)</span>
          </li>
          <li>
            Set every sens to <b>50</b>, this will match your Shadow Legacy hipfire sens 1:1 on all
            scopes
            <span class="xs">
              (it will match the
              <a href="https://twitter.com/kurtextrem/status/1296519586456772610">Visuomotor</a>,
              not 360° distance!)
            </span>
          </li>
          <li>
            Or, restore the old behavior (pre-Shadow Legacy) - use all the values of the calculator
            to match the old feeling
            <small class="xs"
              >(uses official
              <a
                href="https://www.ubisoft.com/en-us/game/rainbow-six/siege/news-updates/3IMlDGlaRFgdvQNq3BOSFv/guide-to-ads-sensitivity-in-y5s3"
                >Ubisoft</a
              >
              values):</small
            >
          </li>
        </ol>
      </div>
      <div class="form-group">
        <label for="sens">Pre-Shadow Legacy (Live) <b>ADS</b> sensitivity:</label>&nbsp;
        <input type="number" id="sens" name="sens" value="83" min="1" />
        <br />
        <label
          >Aspect ratio:
          <select name="aspect">
            <option value="16/9" selected>16:9 (Auto)</option>
            <option value="16/10">16:10</option>
            <option value="4/3">4:3</option>
            <option value="3/2">3:2</option>
            <option value="5/3">5:3</option>
            <option value="5/4">5:4</option>
            <option value="19/10">19:10</option>
            <option value="21/9">21:9</option>
          </select> </label
        ><br />
        <label>FOV: <input type="number" name="fov" value="75" max="90" min="60" /></label><br />
      </div>
      <label><input type="checkbox" name="additional" />Show decimals</label>
      <div id="warning" class="mt-2 alert alert-danger"></div>

      <div>
        <table>
          <thead>
            <tr>
              <th>Scope</th>
              <th>1.0x</th>
              <th>1.5x</th>
              <th>2.0x</th>
              <th>2.5x (new ACOG)</th>
              <th>3.0x</th>
              <th>4.0x</th>
              <th>5.0x</th>
              <th>12.0x</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Sensitivity</td>
              <td><output name="x1" for="sens"></output><span class="x1NEW"></span></td>
              <td><output name="x15" for="sens"></output><span class="x15NEW"></span></td>
              <td><output name="x2" for="sens"></output><span class="x2NEW"></span></td>
              <td><output name="x25" for="sens"></output><span class="x25NEW"></span></td>
              <td><output name="x3" for="sens"></output><span class="x3NEW"></span></td>
              <td><output name="x4" for="sens"></output><span class="x4NEW"></span></td>
              <td><output name="x5" for="sens"></output><span class="x5NEW"></span></td>
              <td><output name="x12" for="sens"></output><span class="x12NEW"></span></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="details">
        GameSettings.ini
        <pre>AimDownSightsMouse=<span class="sens1">55</span>
ADSMouseUseSpecific=1
ADSMouseSensitivityGlobal=<span class="sens2">50</span>
ADSMouseSensitivity1x=<span id="x1">38</span>
ADSMouseSensitivity1xHalf=<span id="x15">61</span>
ADSMouseSensitivity2x=<span id="x2">62</span>
ADSMouseSensitivity2xHalf=<span id="x25">62</span>
ADSMouseSensitivity3x=<span id="x3">63</span>
ADSMouseSensitivity4x=<span id="x4">63</span>
ADSMouseSensitivity5x=<span id="x5">63</span>
ADSMouseSensitivity12x=<span id="x12">97</span>
ADSMouseMultiplierUnit=0.020000</pre>
        <div id="warning2">
          <b>If you change ADSMouseMultiplierUnit:</b>
          <pre class="gamesettings">AimDownSightsMouse=<span class="sens1">55</span>
ADSMouseUseSpecific=1
ADSMouseSensitivityGlobal=<span class="sens2">50</span>
ADSMouseSensitivity1x=<span class="x1NEW">38</span>
ADSMouseSensitivity1xHalf=<span class="x15NEW">61</span>
ADSMouseSensitivity2x=<span class="x2NEW">62</span>
ADSMouseSensitivity2xHalf=<span class="x25NEW">62</span>
ADSMouseSensitivity3x=<span class="x3NEW">63</span>
ADSMouseSensitivity4x=<span class="x4NEW">63</span>
ADSMouseSensitivity5x=<span class="x5NEW">63</span>
ADSMouseSensitivity12x=<span class="x12NEW">97</span>
ADSMouseMultiplierUnit=0.010000</pre>
        </div>
      </div>
      <footer>
        <div class="footer-content">
          <h6>Changelog</h6>
          <div class="changelog">
            09/11/2020:
            <div style="margin-top: 0.4em; margin-left: 0.5em">
              Added "Show decimals" option. You can use it to make the calculation more accurate,
              requires changing GameSettings.ini though.<br />I'll use Twitter (<a
                href="https://twitter.com/kurtextrem"
                >@kurtextrem</a
              >) to communicate further updates.
            </div>
          </div>
          <br /><small>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-alert-triangle"
              style="position: relative; top: 2px"
            >
              <path
                d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"
              ></path>
              <line x1="12" y1="9" x2="12" y2="13"></line>
              <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>

            If you have changed your <span class="code">XFactorAiming</span> value in
            GameSettings.ini, you need to set the exact value to
            <span class="code">ADSMouseMultiplierUnit</span> now in GameSettings.ini.</small
          ><br />
          <small>P.S.²: Console Aspect Ratio is 16:9, FOV is 60.</small><br />
          <div class="text-center mt-2 mb-2">&mdash;</div>
          <small class="text-center">
            Made with <span class="heart">❤️</span> by
            <a href="https://twitter.com/kurtextrem">@kurtextrem</a> <i>(me)</i>. Thanks for helping
            initially <a href="https://twitter.com/LightleRyan">@LightleRyan</a>.</small
          >
        </div>
      </footer>
    </form>

    <script>
      "use strict";
      var $ = (_) => document.querySelector(_);

      if (window.requestAnimationFrame === undefined)
        window.requestAnimationFrame = function (fn) {
          window.setTimeout(fn, 16);
        };
      window.requestAnimationFrame(function () {
        loadFromStorage();
        calcSens();
      });

      function loadFromStorage() {
        var data = localStorage.data;
        if (data === undefined) return;

        var json = JSON.parse(data);
        for (var el in json) {
          var value = json[el];
          if (typeof value === "boolean") $('input[name="' + el + '"]').checked = value;
          else if (typeof value === "string") $('option[value="' + value + '"]').selected = true;
          else $('[name="' + el + '"]').value = value;
        }
      }

      function formReducer(data, element) {
        var type = element.type;
        if (type === "checkbox") data[element.name] = element.checked;
        else if (type.indexOf("select") !== -1) data[element.name] = element.value;
        else if (type === "number") data[element.name] = +element.value;

        return data;
      }

      function saveToStorage() {
        try {
          localStorage.data = JSON.stringify(
            [].reduce.call(document.form.elements, formReducer, {})
          );
        } catch (e) {}
      }

      document.form.addEventListener("input", (e) => {
        calcSens();
        saveToStorage();
      });

      document.form.aspect.addEventListener("change", (e) => {
        calcSens();
      });

      function calcSens() {
        var vFOV_rad = document.form.fov.value * (Math.PI / 180);
        var aspectParts = document.form.aspect.value.split("/");
        var aspect = +aspectParts[0] / +aspectParts[1];
        var hFOV = 2 * Math.atan(Math.tan(vFOV_rad / 2) * aspect);
        var vFOV_rad_updated = hFOV > 2.61798 ? 2 * Math.atan(Math.tan(1.309) / aspect) : vFOV_rad;
        var over100 = false;

        var ads = document.form.sens.value;
        $(".sens1").textContent = ads;
        $(".sens2").textContent = ads;

        var fovmult = 0.9;
        var adsmult = 0.6;
        var fovadj = Math.tan((fovmult * vFOV_rad_updated) / 2) / Math.tan(vFOV_rad_updated / 2);
        var x1 = (adsmult / fovadj) * ads;

        fovmult = 0.59;
        adsmult = 0.59;
        fovadj = Math.tan((fovmult * vFOV_rad_updated) / 2) / Math.tan(vFOV_rad_updated / 2);
        var x15 = (adsmult / fovadj) * ads;

        fovmult = 0.49;
        adsmult = 0.49;
        fovadj = Math.tan((fovmult * vFOV_rad_updated) / 2) / Math.tan(vFOV_rad_updated / 2);
        var x2 = (adsmult / fovadj) * ads;

        fovmult = 0.42;
        adsmult = 0.42;
        fovadj = Math.tan((fovmult * vFOV_rad_updated) / 2) / Math.tan(vFOV_rad_updated / 2);
        var x25 = (adsmult / fovadj) * ads;

        fovmult = 0.35;
        adsmult = 0.35;
        fovadj = Math.tan((fovmult * vFOV_rad_updated) / 2) / Math.tan(vFOV_rad_updated / 2);
        var x3 = (adsmult / fovadj) * ads; // old acog

        fovmult = 0.3;
        adsmult = 0.3;
        fovadj = Math.tan((fovmult * vFOV_rad_updated) / 2) / Math.tan(vFOV_rad_updated / 2);
        var x4 = (adsmult / fovadj) * ads;

        fovmult = 0.22;
        adsmult = 0.22;
        fovadj = Math.tan((fovmult * vFOV_rad_updated) / 2) / Math.tan(vFOV_rad_updated / 2);
        var x5 = (adsmult / fovadj) * ads;

        fovmult = 0.092;
        adsmult = 0.14;
        fovadj = Math.tan((fovmult * vFOV_rad_updated) / 2) / Math.tan(vFOV_rad_updated / 2);
        var x12 = (adsmult / fovadj) * ads;

        if (document.form.additional.checked) {
          var x1NEW = Math.round(x1 * 2);
          var x15NEW = Math.round(x15 * 2);
          var x2NEW = Math.round(x2 * 2);
          var x25NEW = Math.round(x25 * 2);
          var x3NEW = Math.round(x3 * 2);
          var x4NEW = Math.round(x4 * 2);
          var x5NEW = Math.round(x5 * 2);
          var x12NEW = Math.round(x12 * 2);

          document.querySelectorAll(".x1NEW").forEach(function (el) {
            el.innerHTML = x1NEW;
          });
          document.querySelectorAll(".x15NEW").forEach(function (el) {
            el.innerHTML = x15NEW;
          });
          document.querySelectorAll(".x2NEW").forEach(function (el) {
            el.innerHTML = x2NEW;
          });
          document.querySelectorAll(".x25NEW").forEach(function (el) {
            el.innerHTML = x25NEW;
          });
          document.querySelectorAll(".x3NEW").forEach(function (el) {
            el.innerHTML = x3NEW;
          });
          document.querySelectorAll(".x4NEW").forEach(function (el) {
            el.innerHTML = x4NEW;
          });
          document.querySelectorAll(".x5NEW").forEach(function (el) {
            el.innerHTML = x5NEW;
          });
          document.querySelectorAll(".x12NEW").forEach(function (el) {
            el.innerHTML = x12NEW;
          });

          x1 = Math.round((x1 + Number.EPSILON) * 100) / 100;
          x15 = Math.round((x15 + Number.EPSILON) * 100) / 100;
          x2 = Math.round((x2 + Number.EPSILON) * 100) / 100;
          x25 = Math.round((x25 + Number.EPSILON) * 100) / 100;
          x3 = Math.round((x3 + Number.EPSILON) * 100) / 100;
          x4 = Math.round((x4 + Number.EPSILON) * 100) / 100;
          x5 = Math.round((x5 + Number.EPSILON) * 100) / 100;
          x12 = Math.round((x12 + Number.EPSILON) * 100) / 100;

          $("#warning").innerHTML =
            '<b><span style="color:red">Important:</span></b> If you want to use the value marked with an asterisk (<span style="color:red">*</span>), you MUST open <b>GameSettings.ini</b> to set: <span class="code">ADSMouseMultiplierUnit=0.01</span> <small>(default is: 0.02)</small>. <br /><small>Note: Values over 200 do not work.</small>';
          $("#warning2").style.display = "block";
          $("#warning").classList.add("animate__flash");
        } else {
          document.querySelectorAll(".x1NEW").forEach(function (el) {
            el.textContent = "";
          });
          document.querySelectorAll(".x15NEW").forEach(function (el) {
            el.textContent = "";
          });
          document.querySelectorAll(".x2NEW").forEach(function (el) {
            el.textContent = "";
          });
          document.querySelectorAll(".x25NEW").forEach(function (el) {
            el.textContent = "";
          });
          document.querySelectorAll(".x3NEW").forEach(function (el) {
            el.textContent = "";
          });
          document.querySelectorAll(".x4NEW").forEach(function (el) {
            el.textContent = "";
          });
          document.querySelectorAll(".x5NEW").forEach(function (el) {
            el.textContent = "";
          });
          document.querySelectorAll(".x12NEW").forEach(function (el) {
            el.textContent = "";
          });
          $("#warning").innerHTML = "";
          $("#warning2").style.display = "none";
          $("#warning").classList.remove("animate__flash");

          x1 = Math.round(x1);
          x15 = Math.round(x15);
          x2 = Math.round(x2);
          x25 = Math.round(x25);
          x3 = Math.round(x3);
          x4 = Math.round(x4);
          x5 = Math.round(x5);
          x12 = Math.round(x12);
        }

        document.form.x1.value = x1;
        $("#x1").textContent = x1;
        $("#x1x").textContent = x1;
        document.form.x15.value = x15;
        $("#x15").textContent = x15;
        document.form.x2.value = x2;
        $("#x2").textContent = x2;
        document.form.x25.value = x25;
        $("#x25").textContent = x25;
        $("#x25x").textContent = x25;
        document.form.x3.value = x3;
        $("#x3").textContent = x3;
        document.form.x4.value = x4;
        $("#x4").textContent = x4;
        document.form.x5.value = x5;
        $("#x5").textContent = x5;
        document.form.x12.value = x12;
        $("#x12").textContent = x12;
      }
    </script>
  </body>
</html>
